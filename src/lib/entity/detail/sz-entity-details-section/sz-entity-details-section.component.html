<sz-entity-detail-section-header
  [sectionTitle]="sectionTitle"
  [sectionCount]="sectionCount"
  [sectionIcon]="sectionIcon"
  [sectionId]="sectionId">
</sz-entity-detail-section-header>
<div>
  <ng-container *ngIf="showByDataSource">
    <sz-entity-detail-section-collapsible-card
      class="by-datasource"
      *ngFor="let dataSourceRecords of _sectionDataByDataSource"
      [showIcon]="showIcon"
      [headerIcon]="headerIcon"
      displayType="record"
      [cardData]="dataSourceRecords"
      [collapsedStatePrefsKey]="this.collapsedStatePrefsKey"
      (onCollapsedChange)="this.onCollapsibleCardStateChange($event)"
      [truncateResults]="true"
      (entityRecordClick)="onEntityRecordClick($event)">
    </sz-entity-detail-section-collapsible-card>
  </ng-container>
  <ng-container *ngIf="showEntitiesByMatchKey">
    <sz-entity-detail-section-collapsible-card
      class="by-matchkey"
      *ngFor="let entitiesByMatchKey of _sectionDataByMatchKey"
      [showIcon]="showIcon"
      [headerIcon]="headerIcon"
      displayType="entity"
      [cardData]="entitiesByMatchKey"
      [truncateResults]="true"
      [collapsedStatePrefsKey]="this.collapsedStatePrefsKey"
      (onCollapsedChange)="this.onCollapsibleCardStateChange($event)"
      (entityRecordClick)="onEntityRecordClick($event)"
      class="by-match-key">
    </sz-entity-detail-section-collapsible-card>
  </ng-container>
  <ng-container *ngIf="!showByDataSource && !showEntitiesByMatchKey">
    <sz-entity-detail-section-collapsible-card
      class="by-entity"
      *ngFor="let cardData of sectionData"
      [showIcon]="showIcon"
      [headerIcon]="headerIcon"
      displayType="entity"
      [cardData]="cardData"
      [collapsedStatePrefsKey]="this.collapsedStatePrefsKey"
      (onCollapsedChange)="this.onCollapsibleCardStateChange($event)"
      [truncateResults]="true"
      (entityRecordClick)="onEntityRecordClick($event)">
    </sz-entity-detail-section-collapsible-card>
  </ng-container>
</div>

